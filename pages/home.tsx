import Head from 'next/head';
import Router from 'next/router';
import { useEffect, useState } from 'react';
import ContainerListTable from '../components/container/ContainerListTable';
import NavBar from '../components/navBar';
import { storeInteractor } from '../lib/localStorage/storeInteractor';

const Home = () => {
  const [show, setShow] = useState(false);
  useEffect(() => {
    // chuckles*
    // I'm in danger
    if (storeInteractor.checkToken) {
      setShow(true);
    } else {
      Router.push('/login');
    }
  });

  if (show) {
    return (
      <div>
        <Head>
          <title>FordaStore</title>
          <meta name="description" content="Generated by create next app" />
          <link rel="icon" href="/main-logo.png" />
        </Head>

        <NavBar />

        <ContainerListTable />
      </div>
    );
  } else {
    return <></>;
  }
};

export default Home;
